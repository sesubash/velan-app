{"version":3,"sources":["app/configs/endpoints.js","app/pages/Login.js"],"names":["config","endpoints","basePath","login","users","list","add","edit","visits","filter","target","get","dashboard","Login","useState","validated","setValidated","history","useHistory","showMessage","setShow","bg","show","onClose","autohide","animation","Header","className","Body","src","require","alt","noValidate","onSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","console","log","JSON","stringify","serialize","hash","axios","url","method","headers","data","then","res","user_info","user","CryptoJS","AES","encrypt","user_name","id","toString","storage","set","push","process","catch","err","Group","Control","type","name","required","placeholder","size"],"mappings":"uHAAA,kCAAO,IAAMA,EAAS,CACpBC,UAAW,CACTC,SAAU,wCACVC,MAAO,qBACPC,MAAO,CACLC,KAAK,WACLC,IAAK,UACLC,KAAM,YAERC,OAAQ,CACNH,KAAM,YACNI,OAAQ,qBAEVC,OAAQ,CACNC,IAAK,iBACLJ,KAAM,mBAERK,UAAW,CACTP,KAAM,uB,2KCyHGQ,UAlIf,WACE,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACMC,EAAUC,cAChB,EAA+BJ,oBAAS,GAAxC,mBAAOK,EAAP,KAAoBC,EAApB,KA+DA,OACE,6BACE,kBAAC,IAAD,CAAOC,GAAG,WAAWC,KAAMH,EAAaI,QAhEzB,kBAAMH,GAASD,IAgE+BK,SAAS,OAAOC,UAAU,QACnF,kBAAC,IAAMC,OAAP,KACE,4BAAQC,UAAU,WAAlB,UAEF,kBAAC,IAAMC,KAAP,kCAIJ,yBAAKD,UAAU,uCAEb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,+CACb,yBAAKA,UAAU,0BACb,yBAAKE,IAAKC,EAAQ,IAAiCC,IAAI,UAEzD,wBAAIJ,UAAU,iCAAd,wBAGA,kBAAC,IAAD,CACEA,UAAU,YACVK,YAAU,EACVjB,UAAWA,EACXkB,SAjFd,SAAsBC,GACpB,IAAMC,EAAOD,EAAME,eACU,IAAzBD,EAAKE,iBACPH,EAAMI,iBACNJ,EAAMK,oBAGNC,QAAQC,IACN,sBAAuBC,KAAKC,UAAUC,IAAUT,EAAM,CAAEU,MAAM,MAChEX,EAAMI,iBAELQ,IAAM,CAGLC,IAjBE,GAAN,OAAU/C,IAAOC,UAAUC,UAA3B,OAAsCF,IAAOC,UAAUE,OAkBnD6C,OAAQ,OACRC,QAAS,GAOTC,KAAMN,IAAUT,EAAM,CAAEU,MAAM,MAI7BM,MAAK,SAACC,GAAS,IAAD,EACX,aAAGA,EAAIF,YAAP,aAAG,EAAUG,UAAW,CACtB,IAAMC,EAAOC,IAASC,IAAIC,QAAQf,KAAKC,UAAU,CAACW,KAAMF,EAAIF,KAAKG,UAAU,GAAGK,UAAWC,GAAIP,EAAIF,KAAKG,UAAU,GAAGM,KAAM,SAASC,WAClIC,IAAQC,IAAI,OAAQR,GACpBrC,EAAQ8C,KAAR,UAAgBC,GAAhB,oBAEA5C,GAAQ,MAMb6C,OAAM,SAACC,QAIZlD,GAAa,KAwCD,kBAAC,IAAKmD,MAAN,CAAYxC,UAAU,uBACpB,kBAAC,IAAKyC,QAAN,CACEC,KAAK,OACLC,KAAK,YACLC,UAAQ,EACRC,YAAY,WACZC,KAAK,KACL9C,UAAU,YAGd,kBAAC,IAAKwC,MAAN,CAAYxC,UAAU,uBACpB,kBAAC,IAAKyC,QAAN,CACEC,KAAK,WACLC,KAAK,WACLC,UAAQ,EACRC,YAAY,WACZC,KAAK,KACL9C,UAAU,YAGd,yBAAKA,UAAU,QACb,kBAAC,IAAD,CACEA,UAAU,oEACV0C,KAAK,UAFP","file":"static/js/10.9e0eeee6.chunk.js","sourcesContent":["export const config = {\n  endpoints: {\n    basePath: \"http://www.velanapp.in/velan/api.php?\",\n    login: \"validateAdminLogin\",\n    users: {\n      list: `getUsers`,\n      add: \"addUser\",\n      edit: \"editUser\",\n    },\n    visits: {\n      list: \"getVisits\",\n      filter: \"getVisitsByFilter\"\n    },\n    target: {\n      get: \"getDailyTarget\",\n      edit: \"editDailyTarget\",\n    },\n    dashboard: {\n      list: \"getDashboradData\",\n    },\n  },\n};","import React, { useState } from \"react\";\nimport { Form, Button, Toast } from \"react-bootstrap\";\nimport { config } from \"../configs/endpoints.js\";\nimport { storage } from \"../utils/session-storage.js\";\nimport serialize  from \"form-serialize\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport CryptoJS from \"crypto-js\";\n\nfunction Login() {\n  const [validated, setValidated] = useState(false);\n  const history = useHistory();\n  const [showMessage, setShow] = useState(false);\n  const toggleShow = () => setShow(!showMessage);\n\n  function getEndpoint() {\n    return `${config.endpoints.basePath}${config.endpoints.login}`;\n  }\n\n  function handleSubmit(event) {\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      // let formData = ;\n      console.log(\n        \"You clicked submit.\", JSON.stringify(serialize(form, { hash: true })));\n      event.preventDefault();\n\n       axios({\n  \n        // Endpoint to send files\n        url: getEndpoint(),\n        method: \"POST\",\n        headers: {\n    \n          // Add any auth token here\n          // authorization: \"your token comes here\",\n        },\n    \n        // Attaching the form data\n        data: serialize(form, { hash: true }),\n      })\n    \n        // Handle the response from backend here\n        .then((res) => { \n            if(res.data?.user_info) {\n              const user = CryptoJS.AES.encrypt(JSON.stringify({user: res.data.user_info[0].user_name, id: res.data.user_info[0].id}), 'velan').toString();\n              storage.set(\"user\", user);\n              history.push(`${process.env.PUBLIC_URL}/dashboard`);\n            } else {\n              setShow(true);\n              // alert(\"Invalid Credentials\")\n            }\n        })\n    \n        // Catch errors if any\n        .catch((err) => { });\n\n    }\n\n    setValidated(true);\n\n  }\n\n  // handleSubmit2 (event) {\n  //   event.preventDefault();\n  //   console.debug(\"data:\", this)\n  //   // let formData = this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"form\"]).toJS();\n  //   // this.props.dispatch(emailSignIn(formData, this.getEndpoint()))\n  //   //   .then(this.props.next)\n  //   //   .catch(() => {});\n  // }\n\n  return (\n    <div>\n      <Toast bg=\"'danger'\" show={showMessage} onClose={toggleShow} autohide=\"true\" animation=\"true\">\n          <Toast.Header>\n            <strong className=\"me-auto\">Error</strong>\n          </Toast.Header>\n          <Toast.Body>\n            Enter Valid credentials.\n          </Toast.Body>\n      </Toast>\n      <div className=\"d-flex align-items-center auth px-0\">\n      \n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-4 mx-auto\">\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n              <div className=\"brand-logo text-center\">\n                <img src={require(\"../../assets/images/logo.svg\")} alt=\"logo\" />\n              </div>\n              <h6 className=\"text-center font-weight-light\">\n                Sign in to continue.\n              </h6>\n              <Form\n                className=\"pt-3 form\"\n                noValidate\n                validated={validated}\n                onSubmit={handleSubmit}\n              >\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"user_name\"\n                    required\n                    placeholder=\"Username\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"password\"\n                    name=\"password\"\n                    required\n                    placeholder=\"Password\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <div className=\"mt-3\">\n                  <Button\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                    type=\"submit\"\n                  >\n                    SIGN IN\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"sourceRoot":""}