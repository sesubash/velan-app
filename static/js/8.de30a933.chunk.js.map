{"version":3,"sources":["app/pages/UserForm.js","app/configs/endpoints.js"],"names":["UserForm","useState","validated","setValidated","user","setUser","history","useHistory","search","useLocation","id","URLSearchParams","get","view","useEffect","axios","config","endpoints","basePath","users","list","then","response","data","filter","u","user_id","console","debug","className","to","pathname","noValidate","onSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","log","serialize","hash","status","url","edit","add","method","headers","res","error","push","alert","message","catch","err","Group","Control","type","defaultValue","first_name","name","required","placeholder","size","last_name","mobile_number","password","Check","label","value","login","visits"],"mappings":"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","file":"static/js/8.de30a933.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { config } from \"../configs/endpoints.js\";\nimport serialize from \"form-serialize\";\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport axios from \"axios\";\n\nfunction UserForm() {\n  const [validated, setValidated] = useState(false);\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n\n  const search = useLocation().search;\n  const id = new URLSearchParams(search).get('id');\n  const view = id ? \"Edit\" : \"Add\";\n\n  useEffect(() => {\n    axios.get(`${config.endpoints.basePath}${config.endpoints.users.list}`).then((response) => {\n      const user = response.data.users.filter(u => u.user_id == id)[0];\n      setUser(user);\n      console.debug(user);\n    });\n  }, []);\n\n  function getEndpoint() {\n    return id ? `${config.endpoints.basePath}${config.endpoints.users.edit}` : `${config.endpoints.basePath}${config.endpoints.users.add}`;\n  }\n\n  function handleSave(event) {\n    const form = event.currentTarget;\n    \n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      // let formData = serialize(form, { hash: true });\n      console.log(\n        \"You clicked submit.\",\n        serialize(form, { hash: true })\n      );\n      event.preventDefault();\n      \n      const data = serialize(form, { hash: true });\n      const status = serialize(form, { hash: true }).status ? \"1\" : \"0\";\n      data.status = status;\n      if(id) {\n         data.user_id = id;\n      }\n\n      axios({\n  \n        // Endpoint to send files\n        url: getEndpoint(),\n        method: \"POST\",\n        headers: {\n          // Add any auth token here\n          // authorization: \"your token comes here\",\n        },\n    \n        // Attaching the form data\n        data: data ,\n      })\n    \n        // Handle the response from backend here\n        .then((res) => { \n           console.debug(res.data.error == \"0\")\n            if(res.data.error == \"0\") {\n              history.push(\"/pages/users\");\n            } else {\n              alert(res.data.error? res.data.message :\"Something Went wrong, Try again later.\")\n            }\n        })\n    \n        // Catch errors if any\n        .catch((err) => { });\n\n    }\n\n    setValidated(true);\n    event.preventDefault();\n  }\n\n  // handleSubmit2 (event) {\n  //   event.preventDefault();\n  //   console.debug(\"data:\", this)\n  //   // let formData = this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"form\"]).toJS();\n  //   // this.props.dispatch(emailSignIn(formData, this.getEndpoint()))\n  //   //   .then(this.props.next)\n  //   //   .catch(() => {});\n  // }\n\n  return (\n    <div>\n      <div className=\"d-flex  auth px-0\">\n        <div className=\"row w-100 mx-0\">\n        <div className=\"col-lg-12 mx-auto\">\n          <div className=\"page-header\">\n              <h3 className=\"page-title\"> User</h3>\n              <Link className=\"btn btn-primary\" to={{pathname: `/pages/users`}}>Back</Link>\n          </div>\n          \n          <div className=\"col-lg-4 mx-auto\">\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n            <h6 className=\"text-center font-weight-bold\">\n                {view} User\n            </h6>\n            <Form\n                className=\"pt-3\"\n                noValidate\n                validated={validated}\n                onSubmit={handleSave}\n              >\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    defaultValue = {user?.first_name}\n                    name=\"first_name\"\n                    required\n                    placeholder=\"First Name\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    defaultValue = {user?.last_name}\n                    name=\"last_name\"\n                    required\n                    placeholder=\"Last Name\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"number\"\n                    defaultValue = {user?.mobile_number}\n                    name=\"mobile_number\"\n                    required\n                    placeholder=\"Mobile\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"password\"\n                    defaultValue = {user?.password}\n                    name=\"password\"\n                    required\n                    placeholder=\"Password\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Check\n                    type={'checkbox'}\n                    name=\"status\"\n                    required\n                    label={`Status`}\n                    value = {user?.status == '0'? false : true}\n                  />\n                </Form.Group>\n                <div className=\"mt-3\">\n                  <Button\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                    type=\"submit\"\n                  >\n                    Save\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserForm;\n","export const config = {\n  endpoints: {\n    basePath: \"http://stronglasstough.com/velan/api.php?\",\n    login: \"validateAdminLogin\",\n    users: {\n      list: `getUsers`,\n      add: \"addUser\",\n      edit: \"editUser\",\n    },\n    visits: {\n      list: \"getVisits\",\n    },\n  },\n};"],"sourceRoot":""}