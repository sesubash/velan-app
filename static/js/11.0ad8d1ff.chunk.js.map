{"version":3,"sources":["app/configs/endpoints.js","app/pages/Target.js"],"names":["config","endpoints","basePath","login","users","list","add","edit","visits","filter","target","get","dashboard","UserForm","useState","validated","setValidated","user","setUser","setTarget","useHistory","showMessage","setShow","getEndpoint","type","useEffect","userStore","storage","bytes","CryptoJS","AES","decrypt","data","JSON","parse","toString","enc","Utf8","axios","then","response","console","log","className","noValidate","onSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","serialize","hash","user_id","id","url","method","headers","res","debug","error","alert","message","catch","err","Group","Label","Control","defaultValue","daily_target","name","required","placeholder","size","show","onClose","bg","autohide","animation","Header","Body"],"mappings":"uHAAA,kCAAO,IAAMA,EAAS,CACpBC,UAAW,CACTC,SAAU,wCACVC,MAAO,qBACPC,MAAO,CACLC,KAAK,WACLC,IAAK,UACLC,KAAM,YAERC,OAAQ,CACNH,KAAM,YACNI,OAAQ,qBAEVC,OAAQ,CACNC,IAAK,iBACLJ,KAAM,mBAERK,UAAW,CACTP,KAAM,uB,2KC0HGQ,UAnIf,WACE,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAwBF,mBAAS,MAAjC,mBAAOG,EAAP,KAAaC,EAAb,KACA,EAA4BJ,mBAAS,MAArC,mBAAOJ,EAAP,KAAeS,EAAf,KAEA,GADgBC,cACeN,oBAAS,IAAxC,mBAAOO,EAAP,KAAoBC,EAApB,KAkBA,SAASC,EAAYC,GACnB,MAAgB,OAARA,EAAD,UACAxB,IAAOC,UAAUC,UADjB,OAC4BF,IAAOC,UAAUS,OAAOC,KADpD,UAEAX,IAAOC,UAAUC,UAFjB,OAE4BF,IAAOC,UAAUS,OAAOH,MAmD7D,OApEAkB,qBAAU,WACR,IAAMC,EAAYC,IAAQhB,IAAI,QAC1BiB,EAASC,IAASC,IAAIC,QAAQL,EAAW,SACzCM,EAAOC,KAAKC,MAAMN,EAAMO,SAASN,IAASO,IAAIC,OAClDnB,EAAQc,GAERM,IACG3B,IAAIY,EAAY,QAChBgB,MAAK,SAACC,GACLrB,EAAUqB,EAASR,KAAKtB,OAAO,OAEjC+B,QAAQC,IAAI,SAAUhC,KACvB,IAyDD,6BACE,yBAAKiC,UAAU,qBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,eACb,wBAAIA,UAAU,cAAd,wBAGF,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,+CACb,wBAAIA,UAAU,gCAAd,sBACA,kBAAC,IAAD,CACEA,UAAU,OACVC,YAAU,EACV7B,UAAWA,EACX8B,SAhEhB,SAAoBC,GAClB,IAAMC,EAAOD,EAAME,cAEnB,IAA6B,IAAzBD,EAAKE,gBACPH,EAAMI,iBACNJ,EAAMK,sBACD,CAELV,QAAQC,IAAI,sBAAuBU,IAAUL,EAAM,CAAEM,MAAM,KAC3DP,EAAMI,iBAEN,IAAMlB,EAAOoB,IAAUL,EAAM,CAAEM,MAAM,IACrCrB,EAAKsB,QAAUrC,EAAKsC,GACpBjB,IAAM,CAEJkB,IAAKjC,IACLkC,OAAQ,OACRC,QAAS,GAMT1B,KAAMA,IAGLO,MAAK,SAACoB,GACLlB,QAAQmB,MAAwB,KAAlBD,EAAI3B,KAAK6B,OACD,KAAlBF,EAAI3B,KAAK6B,OACXpB,QAAQmB,MAAM,kBACdtC,GAAQ,IAERwC,MACEH,EAAI3B,KAAK6B,MACLF,EAAI3B,KAAK+B,QACT,6CAMTC,OAAM,SAACC,OAGZjD,GAAa,GACb8B,EAAMI,mBAqBQ,kBAAC,IAAKgB,MAAN,CAAYvB,UAAU,qBACpB,kBAAC,IAAKwB,MAAN,eACA,kBAAC,IAAKC,QAAN,CACE5C,KAAK,OACL6C,aAAY,OAAE3D,QAAF,IAAEA,OAAF,EAAEA,EAAQ4D,aACtBC,KAAK,eACLC,UAAQ,EACRC,YAAY,SACZC,KAAK,KACL/B,UAAU,YAGd,yBAAKA,UAAU,QACb,kBAAC,IAAD,CACEA,UAAU,oEACVnB,KAAK,UAFP,YAUR,kBAAC,IAAD,CAAOmD,KAAMtD,EAAauD,QA/GjB,kBAAMtD,GAASD,IA+GuBwD,GAAG,YAAYC,SAAS,OAAOC,UAAU,QACtF,kBAAC,IAAMC,OAAP,KACE,4BAAQrC,UAAU,WAAlB,YAEF,kBAAC,IAAMsC,KAAP","file":"static/js/11.0ad8d1ff.chunk.js","sourcesContent":["export const config = {\n  endpoints: {\n    basePath: \"http://www.velanapp.in/velan/api.php?\",\n    login: \"validateAdminLogin\",\n    users: {\n      list: `getUsers`,\n      add: \"addUser\",\n      edit: \"editUser\",\n    },\n    visits: {\n      list: \"getVisits\",\n      filter: \"getVisitsByFilter\"\n    },\n    target: {\n      get: \"getDailyTarget\",\n      edit: \"editDailyTarget\",\n    },\n    dashboard: {\n      list: \"getDashboradData\",\n    },\n  },\n};","import React, { useState, useEffect } from \"react\";\nimport { Form, Button, Toast } from \"react-bootstrap\";\nimport { config } from \"../configs/endpoints.js\";\nimport serialize from \"form-serialize\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { storage } from \"../utils/session-storage.js\";\nimport CryptoJS from \"crypto-js\";\n\nfunction UserForm() {\n  const [validated, setValidated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [target, setTarget] = useState(null);\n  const history = useHistory();\n  const [showMessage, setShow] = useState(false);\n\n  const toggleShow = () => setShow(!showMessage);\n\n  useEffect(() => {\n    const userStore = storage.get('user');\n    var bytes  = CryptoJS.AES.decrypt(userStore, 'velan');\n    var data = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n    setUser(data);\n\n    axios\n      .get(getEndpoint('get'))\n      .then((response) => {\n        setTarget(response.data.target[0]);\n      });\n      console.log(\"Target\", target);\n  }, []);\n\n  function getEndpoint(type) {\n    return (type == 'get')\n      ? `${config.endpoints.basePath}${config.endpoints.target.get}`\n      : `${config.endpoints.basePath}${config.endpoints.target.edit}`;\n  }\n\n  function handleSave(event) {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      // let formData = serialize(form, { hash: true });\n      console.log(\"You clicked submit.\", serialize(form, { hash: true }));\n      event.preventDefault();\n\n      const data = serialize(form, { hash: true });\n      data.user_id = user.id;\n      axios({\n        // Endpoint to send files\n        url: getEndpoint(),\n        method: \"POST\",\n        headers: {\n          // Add any auth token here\n          // authorization: \"your token comes here\",\n        },\n\n        // Attaching the form data\n        data: data,\n      })\n        // Handle the response from backend here\n        .then((res) => {\n          console.debug(res.data.error == \"0\");\n          if (res.data.error == \"0\") {\n            console.debug(\"Target Updated\");\n            setShow(true);\n          } else {\n            alert(\n              res.data.error\n                ? res.data.message\n                : \"Something Went wrong, Try again later.\"\n            );\n          }\n        })\n\n        // Catch errors if any\n        .catch((err) => {});\n    }\n\n    setValidated(true);\n    event.preventDefault();\n  }\n\n  return (\n    <div>\n      <div className=\"d-flex  auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-12 mx-auto\">\n            <div className=\"page-header\">\n              <h3 className=\"page-title\"> Daily Visit Target</h3>\n            </div>\n\n            <div className=\"col-lg-4 mx-auto\">\n              <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n                <h6 className=\"text-center font-weight-bold\">Daily Visit Target</h6>\n                <Form\n                  className=\"pt-3\"\n                  noValidate\n                  validated={validated}\n                  onSubmit={handleSave}\n                >\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Label>Target</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      defaultValue={target?.daily_target}\n                      name=\"daily_target\"\n                      required\n                      placeholder=\"Target\"\n                      size=\"lg\"\n                      className=\"h-auto\"\n                    />\n                  </Form.Group>\n                  <div className=\"mt-3\">\n                    <Button\n                      className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                      type=\"submit\"\n                    >\n                      Save\n                    </Button>\n                  </div>\n                </Form>\n              </div>\n            </div>\n            <Toast show={showMessage} onClose={toggleShow} bg=\"'success'\" autohide=\"true\" animation=\"true\">\n              <Toast.Header>\n                <strong className=\"me-auto\">Success</strong>\n              </Toast.Header>\n              <Toast.Body>Target is updated</Toast.Body>\n            </Toast>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserForm;\n"],"sourceRoot":""}