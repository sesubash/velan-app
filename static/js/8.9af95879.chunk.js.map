{"version":3,"sources":["app/pages/UserForm.js","app/configs/endpoints.js"],"names":["UserForm","useState","validated","setValidated","user","setUser","history","useHistory","search","useLocation","id","URLSearchParams","get","view","useEffect","axios","config","endpoints","basePath","users","list","then","response","data","filter","u","user_id","status","console","debug","className","to","pathname","process","noValidate","onSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","log","serialize","hash","url","edit","add","method","headers","res","error","push","alert","message","catch","err","Group","Label","Control","type","defaultValue","first_name","name","required","placeholder","size","last_name","mobile_number","maxLength","disabled","password","Check","label","defaultChecked","login","visits","dashboard"],"mappings":"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","file":"static/js/8.9af95879.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { config } from \"../configs/endpoints.js\";\nimport serialize from \"form-serialize\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction UserForm() {\n  const [validated, setValidated] = useState(false);\n  const [user, setUser] = useState(null);\n  const history = useHistory();\n\n  const search = useLocation().search;\n  const id = new URLSearchParams(search).get(\"id\");\n  const view = id ? \"Edit\" : \"Add\";\n\n  useEffect(() => {\n    axios\n      .get(`${config.endpoints.basePath}${config.endpoints.users.list}`)\n      .then((response) => {\n        const user = response.data.users.filter((u) => u.user_id == id)[0];\n        user.status = (user.status === \"1\")  ?  \"true\": \"\";\n        setUser(user);\n        console.debug(user);\n      });\n  }, []);\n\n  function getEndpoint() {\n    return id\n      ? `${config.endpoints.basePath}${config.endpoints.users.edit}`\n      : `${config.endpoints.basePath}${config.endpoints.users.add}`;\n  }\n\n  function handleSave(event) {\n    const form = event.currentTarget;\n\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      // let formData = serialize(form, { hash: true });\n      console.log(\"You clicked submit.\", serialize(form, { hash: true }));\n      event.preventDefault();\n\n      const data = serialize(form, { hash: true });\n      const status = serialize(form, { hash: true }).status ? \"1\" : \"0\";\n      data.status = status;\n      if (id) {\n        data.user_id = id;\n      }\n\n      axios({\n        // Endpoint to send files\n        url: getEndpoint(),\n        method: \"POST\",\n        headers: {\n          // Add any auth token here\n          // authorization: \"your token comes here\",\n        },\n\n        // Attaching the form data\n        data: data,\n      })\n        // Handle the response from backend here\n        .then((res) => {\n          console.debug(res.data.error == \"0\");\n          if (res.data.error == \"0\") {\n            history.push(`${process.env.PUBLIC_URL}/pages/users`);\n          } else {\n            alert(\n              res.data.error\n                ? res.data.message\n                : \"Something Went wrong, Try again later.\"\n            );\n          }\n        })\n\n        // Catch errors if any\n        .catch((err) => {});\n    }\n\n    setValidated(true);\n    event.preventDefault();\n  }\n\n  // handleSubmit2 (event) {\n  //   event.preventDefault();\n  //   console.debug(\"data:\", this)\n  //   // let formData = this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"form\"]).toJS();\n  //   // this.props.dispatch(emailSignIn(formData, this.getEndpoint()))\n  //   //   .then(this.props.next)\n  //   //   .catch(() => {});\n  // }\n\n  return (\n    <div>\n      <div className=\"d-flex  auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-12 mx-auto\">\n            <div className=\"page-header\">\n              <h3 className=\"page-title\"> User</h3>\n              <Link\n                className=\"btn btn-primary\"\n                to={{\n                  pathname: `${process.env.PUBLIC_URL}/pages/users`,\n                }}\n              >\n                Back\n              </Link>\n            </div>\n\n            <div className=\"col-lg-4 mx-auto\">\n              <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n                <h6 className=\"text-center font-weight-bold\">{view} User</h6>\n                <Form\n                  className=\"pt-3\"\n                  noValidate\n                  validated={validated}\n                  onSubmit={handleSave}\n                >\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Label>First Name</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      defaultValue={user?.first_name}\n                      name=\"first_name\"\n                      required\n                      placeholder=\"First Name\"\n                      size=\"lg\"\n                      className=\"h-auto\"\n                    />\n                  </Form.Group>\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Label>Last Name</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      defaultValue={user?.last_name}\n                      name=\"last_name\"\n                      required\n                      placeholder=\"Last Name\"\n                      size=\"lg\"\n                      className=\"h-auto\"\n                    />\n                  </Form.Group>\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Label>Mobile Number</Form.Label>\n                    <Form.Control\n                      type=\"tel\"\n                      defaultValue={user?.mobile_number}\n                      name=\"mobile_number\"\n                      maxLength=\"10\"\n                      required\n                      placeholder=\"Mobile\"\n                      size=\"lg\"\n                      className=\"h-auto\"\n                      disabled={(view =='Edit') ? true : false}\n                    />\n                  </Form.Group>\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control\n                      type=\"password\"\n                      defaultValue={user?.password}\n                      name=\"password\"\n                      required\n                      placeholder=\"Password\"\n                      size=\"lg\"\n                      className=\"h-auto\"\n                    />\n                  </Form.Group>\n                  <Form.Group className=\"mb-3 search-field\">\n                    <Form.Check\n                      className=\"mx-4\"\n                      type={\"checkbox\"}\n                      name=\"status\"\n                      label={`Status`}\n                      defaultChecked={user?.status}\n                    />\n                  </Form.Group>\n                  <div className=\"mt-3\">\n                    <Button\n                      className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                      type=\"submit\"\n                    >\n                      Save\n                    </Button>\n                  </div>\n                </Form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserForm;\n","export const config = {\n  endpoints: {\n    basePath: \"http://www.velanapp.in/velan/api.php?\",\n    login: \"validateAdminLogin\",\n    users: {\n      list: `getUsers`,\n      add: \"addUser\",\n      edit: \"editUser\",\n    },\n    visits: {\n      list: \"getVisits\",\n    },\n    dashboard: {\n      list: \"getDashboradData\",\n    },\n  },\n};"],"sourceRoot":""}