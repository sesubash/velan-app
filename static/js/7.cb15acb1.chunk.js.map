{"version":3,"sources":["app/pages/Login.js","app/configs/endpoints.js"],"names":["Login","useState","validated","setValidated","history","useHistory","show","setShow","className","src","require","alt","noValidate","onSubmit","event","form","currentTarget","checkValidity","preventDefault","stopPropagation","console","log","JSON","stringify","serialize","hash","axios","url","config","endpoints","basePath","login","method","headers","data","then","res","user_info","storage","set","user_name","push","process","alert","catch","err","Group","Control","type","name","required","placeholder","size","onClick","bg","key","onClose","delay","autohide","Header","Body","users","list","add","edit","visits","dashboard"],"mappings":"6OA0IeA,UAlIf,WACE,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACMC,EAAUC,cAChB,EAAwBJ,oBAAS,GAAjC,mBAAOK,EAAP,KAAaC,EAAb,KA4DA,OACE,6BACE,yBAAKC,UAAU,uCACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,+CACb,yBAAKA,UAAU,0BACb,yBAAKC,IAAKC,EAAQ,IAAiCC,IAAI,UAEzD,wBAAIH,UAAU,iCAAd,wBAGA,kBAAC,IAAD,CACEA,UAAU,YACVI,YAAU,EACVV,UAAWA,EACXW,SAtEd,SAAsBC,GACpB,IAAMC,EAAOD,EAAME,eACU,IAAzBD,EAAKE,iBACPH,EAAMI,iBACNJ,EAAMK,oBAGNC,QAAQC,IACN,sBAAuBC,KAAKC,UAAUC,IAAUT,EAAM,CAAEU,MAAM,MAChEX,EAAMI,iBAELQ,IAAM,CAGLC,IAjBE,GAAN,OAAUC,IAAOC,UAAUC,UAA3B,OAAsCF,IAAOC,UAAUE,OAkBnDC,OAAQ,OACRC,QAAS,GAOTC,KAAMV,IAAUT,EAAM,CAAEU,MAAM,MAI7BU,MAAK,SAACC,GAAS,IAAD,GACX,UAAGA,EAAIF,YAAP,aAAG,EAAUG,YACXC,IAAQC,IAAI,OAAQH,EAAIF,KAAKG,UAAU,GAAGG,WAC1CpC,EAAQqC,KAAR,UAAgBC,GAAhB,gBAEAC,MAAM,0BAKXC,OAAM,SAACC,QAIZ1C,GAAa,KA+BD,kBAAC,IAAK2C,MAAN,CAAYtC,UAAU,uBACpB,kBAAC,IAAKuC,QAAN,CACEC,KAAK,OACLC,KAAK,YACLC,UAAQ,EACRC,YAAY,WACZC,KAAK,KACL5C,UAAU,YAGd,kBAAC,IAAKsC,MAAN,CAAYtC,UAAU,uBACpB,kBAAC,IAAKuC,QAAN,CACEC,KAAK,WACLC,KAAK,WACLC,UAAQ,EACRC,YAAY,WACZC,KAAK,KACL5C,UAAU,YAGd,yBAAKA,UAAU,QACb,kBAAC,IAAD,CACEA,UAAU,oEACVwC,KAAK,SACLK,QAAS,kBAAM9C,GAAQ,KAHzB,iBAcZ,kBAAC,IAAD,CAAO+C,GAAI,SAAUC,IAAK,IAAKC,QAAS,kBAAMjD,GAAQ,IAAQD,KAAMA,EAAMmD,MAAO,IAAMC,UAAQ,GAC7F,kBAAC,IAAMC,OAAP,KACE,yBAAKlD,IAAI,2BAA2BD,UAAU,eAAeG,IAAI,KACjE,4BAAQH,UAAU,WAAlB,SACA,+CAEF,kBAAC,IAAMoD,KAAP,CAAYpD,UAAW,cAAvB,gC,gCClIR,kCAAO,IAAMoB,EAAS,CACpBC,UAAW,CACTC,SAAU,wCACVC,MAAO,qBACP8B,MAAO,CACLC,KAAK,WACLC,IAAK,UACLC,KAAM,YAERC,OAAQ,CACNH,KAAM,aAERI,UAAW,CACTJ,KAAM","file":"static/js/7.cb15acb1.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Button, Toast } from \"react-bootstrap\";\nimport { config } from \"../configs/endpoints.js\";\nimport { storage } from \"../utils/session-storage.js\";\nimport serialize  from \"form-serialize\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction Login() {\n  const [validated, setValidated] = useState(false);\n  const history = useHistory();\n  const [show, setShow] = useState(false);\n  \n  function getEndpoint() {\n    return `${config.endpoints.basePath}${config.endpoints.login}`;\n  }\n\n  function handleSubmit(event) {\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      // let formData = ;\n      console.log(\n        \"You clicked submit.\", JSON.stringify(serialize(form, { hash: true })));\n      event.preventDefault();\n\n       axios({\n  \n        // Endpoint to send files\n        url: getEndpoint(),\n        method: \"POST\",\n        headers: {\n    \n          // Add any auth token here\n          // authorization: \"your token comes here\",\n        },\n    \n        // Attaching the form data\n        data: serialize(form, { hash: true }),\n      })\n    \n        // Handle the response from backend here\n        .then((res) => { \n            if(res.data?.user_info) {\n              storage.set(\"user\", res.data.user_info[0].user_name);\n              history.push(`${process.env.PUBLIC_URL}/dashboard`);\n            } else {\n              alert(\"Invalid Credentials\")\n            }\n        })\n    \n        // Catch errors if any\n        .catch((err) => { });\n\n    }\n\n    setValidated(true);\n\n  }\n\n  // handleSubmit2 (event) {\n  //   event.preventDefault();\n  //   console.debug(\"data:\", this)\n  //   // let formData = this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"form\"]).toJS();\n  //   // this.props.dispatch(emailSignIn(formData, this.getEndpoint()))\n  //   //   .then(this.props.next)\n  //   //   .catch(() => {});\n  // }\n\n  return (\n    <div>\n      <div className=\"d-flex align-items-center auth px-0\">\n        <div className=\"row w-100 mx-0\">\n          <div className=\"col-lg-4 mx-auto\">\n            <div className=\"auth-form-light text-left py-5 px-4 px-sm-5\">\n              <div className=\"brand-logo text-center\">\n                <img src={require(\"../../assets/images/logo.svg\")} alt=\"logo\" />\n              </div>\n              <h6 className=\"text-center font-weight-light\">\n                Sign in to continue.\n              </h6>\n              <Form\n                className=\"pt-3 form\"\n                noValidate\n                validated={validated}\n                onSubmit={handleSubmit}\n              >\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"text\"\n                    name=\"user_name\"\n                    required\n                    placeholder=\"Username\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <Form.Group className=\"d-flex search-field\">\n                  <Form.Control\n                    type=\"password\"\n                    name=\"password\"\n                    required\n                    placeholder=\"Password\"\n                    size=\"lg\"\n                    className=\"h-auto\"\n                  />\n                </Form.Group>\n                <div className=\"mt-3\">\n                  <Button\n                    className=\"btn btn-block btn-primary btn-lg font-weight-medium auth-form-btn\"\n                    type=\"submit\" \n                    onClick={() => setShow(true)}\n                  >\n                    SIGN IN\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Toast bg={'danger'} key={'1'} onClose={() => setShow(false)} show={show} delay={3000} autohide>\n        <Toast.Header>\n          <img src=\"holder.js/20x20?text=%20\" className=\"rounded me-2\" alt=\"\" />\n          <strong className=\"me-auto\">Error</strong>\n          <small>11 mins ago</small>\n        </Toast.Header>\n        <Toast.Body className={'text-white'}>\n          Enter Valid credentials.\n        </Toast.Body>\n      </Toast>\n    </div>\n  );\n}\n\nexport default Login;\n","export const config = {\n  endpoints: {\n    basePath: \"http://www.velanapp.in/velan/api.php?\",\n    login: \"validateAdminLogin\",\n    users: {\n      list: `getUsers`,\n      add: \"addUser\",\n      edit: \"editUser\",\n    },\n    visits: {\n      list: \"getVisits\",\n    },\n    dashboard: {\n      list: \"getDashboradData\",\n    },\n  },\n};"],"sourceRoot":""}